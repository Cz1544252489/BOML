dist: xenial
language: python
after_success:
    - bash <(curl -s https://codecov.io/bash)
jobs:
    include:
        - name: "PyBML test on Xenial Linux with Python 3.7"
          python: 3.7
install: 
    - pip3 install -r requirements.txt
    - pip install coverage
script: 
    - cd train_script
    # - python3 maml_train.py
    #- coverage run maml_train.py --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=1 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaInit --inner_method=Simple --outer_method=Simple --logdir=../tmp/ --print-interval=100 --save_interval=100 --Notes=toolkit_MAML
    - coverage run maml_train.py --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=1 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaInit --inner_method=Simple --outer_method=Simple --logdir=../tmp/ --print-interval=100 --save_interval=100 --first_order=True --Notes=toolkit_FOMAML
    - coverage run maml_train.py --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=1 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaInit --inner_method=Simple --outer_method=Simple --logdir=../tmp/ --print-interval=100 --save_interval=100 --use_T=True --Notes=toolkit_TNet
    - coverage run maml_train.py --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=1 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaInit --inner_method=Simple --outer_method=Simple --logdir=../tmp/ --print-interval=100 --save_interval=100 --use_Warp=True --Notes=toolkit_warp
    #- coverage run meta_repr_train.py  --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=2 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaRepr --inner_method=Trad --outer_method=Reverse --logdir=../tmp/ --print-interval=100 --save_interval=100 --Notes=toolkit_test_RHG
    #- coverage run meta_repr_train.py  --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=2 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaRepr --inner_method=Trad --outer_method=Reverse --logdir=../tmp/ --print-interval=100 --truncate_iter=1 --save_interval=100 --Notes=toolkit_test_TRHG
    - coverage run meta_repr_train.py  --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=2 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaRepr --inner_method=Aggr --outer_method=Reverse --logdir=../tmp/ --alpha=0.7 --print-interval=100 --save_interval=100 --Notes=toolkit_test_BDA
    - coverage run meta_repr_train.py  --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=2 --n_meta_iterations=200 --T=1 --meta-lr=0.001 --lr=0.1 --method=MetaRepr --inner_method=Trad --outer_method=Darts --logdir=../tmp/ --print-interval=100 --save_interval=100 --Notes=toolkit_test_DARTS
    - coverage run meta_repr_train.py  --mode=train --dataset=omniglot --classes=5 --examples_train=1 --examples_test=15 --meta_batch_size=2 --n_meta_iterations=200 --T=2 --meta-lr=0.001 --lr=0.1 --method=MetaRepr --inner_method=Trad --outer_method=Implicit --logdir=../tmp/ --print-interval=100 --save_interval=100 --Notes=toolkit_test_Implicit




